# 設計書: M&Aポータルサイトの要件定義書作成（企業情報表示項目、検索機能仕様、提携パートナー管理機能の確定）

タスクID: 1
作成日時: 2025-10-05T18:30:59.873041

---

了解しました。経験豊富なシステム設計者として、M&Aポータルサイトの要件定義書を作成します。

タスク概要

目的

M&Aポータルサイトの要件定義書を作成し、サイトの中核となる企業情報表示項目、検索機能仕様、提携パートナー管理機能を明確に定義します。この定義は、以降のシステム設計および実装の基礎となります。

スコープ

本タスクでは、以下の主要機能に焦点を当てて要件を定義します。

企業情報表示項目の定義（売り手企業・買い手企業）

検索機能の具体的な仕様定義

提携パートナーが利用する管理機能の定義

設計内容

1. 企業情報表示項目

ユーザー（売り手/買い手企業、仲介者、提携パートナーなど）がM&A案件を検討するために必要な情報を定義します。

1.1. 企業（案件）基本情報 (共通)

項目名	データ型	必須/任意	備考
案件ID	UUID	必須	案件を一意に識別
案件名	文字列 (50)	必須	案件のタイトル（公開情報）
M&Aスキーム	ENUM	必須	株式譲渡、事業譲渡、合併など
希望売却/買収価格	整数 (万円)	必須	レンジ、または具体的な金額。非公開設定も可能
掲載期間	日付範囲	必須	案件の公開期間
進捗ステータス	ENUM	必須	公開中、商談中、成約済、非公開など
Google スプレッドシートにエクスポート

1.2. 売り手企業（譲渡企業）情報

項目名	データ型	必須/任意	備考
業種カテゴリ	ENUM/多対多	必須	標準化された分類（複数選択可）
所在地	文字列	必須	都道府県・市区町村レベル
設立年	整数	必須	
従業員数	整数	必須	
直近3期売上	JSON/数値配列	必須	年次売上高、営業利益（非公開情報として管理）
譲渡理由	文字列 (500)	必須	
Google スプレッドシートにエクスポート

1.3. 買い手企業（譲受企業）情報 (ニーズ登録時)

項目名	データ型	必須/任意	備考
希望業種	ENUM/多対多	必須	ターゲットとする業種（複数選択可）
希望エリア	文字列	必須	ターゲットとする地域
買収目的	文字列 (500)	必須	事業拡大、新規参入、技術取得など
Google スプレッドシートにエクスポート

2. 検索機能仕様

ユーザーが目的の案件を効率的に見つけられるよう、柔軟かつ高速な検索機能を提供します。

2.1. 検索対象

案件名 (部分一致)

業種カテゴリ (完全一致/複数選択)

所在地 (完全一致/複数選択)

希望価格帯 (レンジ検索: Min/Max)

キーワード (企業概要、譲渡理由などのフリーテキストフィールドを対象とした全文検索)

M&Aスキーム (完全一致/複数選択)

2.2. 検索UIの振る舞い

インクリメンタルサーチ: 案件名やキーワード入力時、該当する案件候補をサジェストする機能は実装しない（セキュリティと初期実装の負荷軽減のため）。

結果表示: 一覧表示（ページネーション必須）、1ページあたりの表示件数は20件。

ソート機能: 新着順（デフォルト）、希望価格順（昇順/降順）、更新日順。

2.3. セキュリティ/アクセス制御

非公開情報: 希望売却/買収価格の具体的な金額や詳細な財務情報は、ログインユーザーかつ機密情報開示の許可を得たユーザーにのみ表示する。一般公開の検索結果には価格レンジまたは非公開と表示する。

3. 提携パートナー管理機能

M&A仲介会社や士業事務所などの提携パートナーが、自身の担当案件を効率的に管理・公開するための機能です。

3.1. 機能一覧

案件登録・編集:

提携パートナー専用フォームからの案件情報登録（上記1.1, 1.2の項目を利用）。

案件登録後、管理者の承認を経てサイトに公開されるワークフローとする。

案件ステータス管理:

進捗ステータス（公開中、商談中、成約済など）の変更機能。

成約済みの案件は自動的にサイトから非表示とする。

案件閲覧履歴:

自身の公開案件に対する閲覧数、**関心を示したユーザー（匿名化されたID）**の一覧表示。

3.2. アクセス制御（重要）

提携パートナーは、自身が登録した案件のみを閲覧・編集・管理できる。他パートナーの案件には一切アクセスできない。

パートナーアカウントは、システム管理者が個別に発行し、厳格な認証（多要素認証推奨）を要求する。

技術選定

分野	技術	選定理由
バックエンド	Python (Django/FastAPI) または Go	【実装可能性/開発効率】 Pythonは開発速度が速く、Django/FastAPIで迅速なAPI構築が可能。Goはスケーラビリティと実行速度に優れ、将来的なトラフィック増に耐えやすい。初期フェーズでは**Python (Django)**を推奨。
データベース	PostgreSQL	【堅牢性/スケーラビリティ】 複雑なトランザクションとデータ整合性が求められるM&A情報に適している。JSONB型による柔軟なデータ格納や、全文検索機能（pg_trgmやtsvector）のサポートも利点。
全文検索	Elasticsearch (または PostgreSQLの機能)	【スケーラビリティ/パフォーマンス】 高速なキーワード検索、特に大規模データに対応するため。初期はPostgreSQLの全文検索機能で開発を簡素化し、データ量が増加したらElasticsearchに移行する選択肢を残す。
フロントエンド	React/Next.js	【開発効率/SEO】 コンポーネント指向で開発効率が高い。Next.jsはサーバーサイドレンダリング(SSR)が可能で、M&Aポータルサイトに重要な**検索エンジン最適化 (SEO)**に強い。
Google スプレッドシートにエクスポート

実装における注意点

1. セキュリティ（最優先事項）

認証・認可: 提携パートナー、一般ユーザー、管理者の各ロールに対して、**RBAC (Role-Based Access Control)**を厳格に実装すること。特に提携パートナー管理機能における他社案件へのアクセス制御は徹底する。

機密情報: 希望価格などの機密情報は、データベース内で暗号化して保存することを検討する。

API通信: 全ての通信は**TLS/SSL (HTTPS)**を必須とし、APIへのリクエストはレートリミットを設ける。

2. データ整合性

案件の進捗ステータス変更時（例: 公開中→成約済）には、関連する全データ（例: 検索インデックス、ユーザー通知）が正しく更新されるよう、データベーストランザクションを適切に利用する。

3. スケーラビリティ

検索機能は将来的に負荷が高まることが予想されるため、DBのクエリ最適化に加え、インデックス設計を慎重に行うこと。

静的なファイル（企業ロゴなど）は**CDN (Content Delivery Network)**を利用し、オリジンサーバーの負荷を軽減する。

次のステップ

データベーススキーマ詳細設計: 定義した表示項目に基づき、