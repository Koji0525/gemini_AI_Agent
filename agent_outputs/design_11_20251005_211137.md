# 設計書: 企業情報表示項目（基本情報、売り手、買い手ニーズ）の必須/任意、データ型、備考を含む詳細定義を要件定義書の第1章に記述する。

タスクID: 11
作成日時: 2025-10-05T21:11:37.208251

---

はい、経験豊富なシステム設計者として、M&Aポータルサイトの要件定義書における中核となる企業情報表示項目の詳細定義を行います。この定義は、今後のWordPressカスタムフィールド (CF) およびカスタム投稿タイプ (CPT) の設計基盤となります。

タスク概要

目的

M&A案件の核となる企業情報（基本情報、売り手企業情報、買い手ニーズ）について、項目名、データ型、必須/任意、および実装上の注意点を含む詳細な仕様を確定させます。これにより、データベーススキーマ設計、フロントエンド表示、および検索機能設計の基礎を確立します。

スコープ

案件を構成する全項目のデータ属性（データ型、必須/任意）の定義。

WordPressのカスタムフィールド・タクソノミーへのマッピング方針の決定。

セキュリティ要件（暗号化）の対象項目の特定。

設計内容

1. 企業（案件）基本情報 (共通)

この情報は、売り手・買い手案件双方に共通する案件識別および概要情報です。カスタム投稿タイプ ma_case の基本属性として格納されます。

項目名	データ型	必須/任意	格納先（WordPress）	備考
案件ID	UUID	必須	post_name または Custom Field	案件を一意に識別。URLにも利用。
案件名	文字列 (50)	必須	post_title	案件のタイトル（公開情報）。
M&Aスキーム	ENUM/多対多	必須	カスタムタクソノミー (ma_scheme)	株式譲渡、事業譲渡など。検索フィルタ対象。
希望売却/買収価格	整数 (万円)	必須	カスタムフィールド (price_amount)	数値型で格納。機密情報（暗号化対象）。検索時のレンジ検索対象。
価格レンジ	文字列 (50)	必須	カスタムフィールド (price_range_text)	一般公開時の表示用（例: 「3000万〜5000万円」）。
掲載期間	日付範囲	必須	カスタムフィールド (start_date, end_date)	案件の公開期間を制御。
進捗ステータス	ENUM	必須	カスタムタクソノミー (status)	公開中、商談中、成約済など。案件ワークフロー制御に使用。
Google スプレッドシートにエクスポート

2. 売り手企業（譲渡企業）情報

この情報は、主に売り手案件の登録時に利用される詳細情報です。

項目名	データ型	必須/任意	格納先（WordPress）	備考
業種カテゴリ	ENUM/多対多	必須	カスタムタクソノミー (industry)	標準化された分類（複数選択可）。検索フィルタ対象。
所在地	文字列	必須	カスタムタクソノミー (location)	都道府県・市区町村レベル。検索フィルタ対象。
設立年	整数 (YYYY)	必須	カスタムフィールド (establishment_year)	
従業員数	整数	必須	カスタムフィールド (employees_count)	
直近3期売上/利益	JSON/数値配列	必須	カスタムフィールド (financial_data)	年次売上高、営業利益など。ACFの繰り返しフィールドとして格納。機密情報（暗号化対象）。
譲渡理由	文字列 (500)	必須	post_content または Custom Field	検索時のキーワード全文検索対象。
Google スプレッドシートにエクスポート

3. 買い手企業（譲受企業）情報 (ニーズ登録時)

この情報は、買い手企業が希望するM&Aニーズを登録する際に利用されます。

項目名	データ型	必須/任意	格納先（WordPress）	備考
希望業種	ENUM/多対多	必須	カスタムタクソノミー (target_industry)	ターゲットとする業種（複数選択可）。
希望エリア	文字列	必須	カスタムタクソノミー (target_location)	ターゲットとする地域。
買収目的	文字列 (500)	必須	カスタムフィールド (acquisition_purpose)	事業拡大、新規参入など。
Google スプレッドシートにエクスポート

技術選定

分野	技術	選定理由
データ構造	カスタム投稿タイプ (CPT)	案件情報をWordPressの標準投稿とは分離し、独自の構造を持たせるため。
フィールド管理	ACF (Advanced Custom Fields) Pro	複雑なデータ型（数値型、繰り返しフィールド、真偽値など）を直感的に定義・管理し、開発効率を高めるため。
分類管理	カスタムタクソノミー	ENUMや多対多の関係（業種、スキームなど）を効率的に管理し、検索時の**tax_query**を容易に実現するため。
Google スプレッドシートにエクスポート

実装における注意点

データ型の一貫性: price_amountやemployees_countなど、検索やソートの対象となる数値データは、カスタムフィールドに必ず**数値型（Number）**として格納すること。文字列として格納すると、レンジ検索や正しいソートが実現できず、実装上の重大な問題となる。

機密情報（暗号化）: price_amountとfinancial_dataは、要件として定められている通り、WordPressのupdate_post_metaフックなどでデータベースへの保存時に暗号化し、取得時に複合化するカスタムロジックを適用すること。

多対多関係の処理: 業種カテゴリやM&Aスキームなどの複数選択項目は、カスタムタクソノミーの標準機能を利用し、データ整合性を保ちながら検索フィルタに利用できるように設計すること。

次のステップ

検索機能仕様の詳細定義: 定義した項目（業種、所在地、価格など）を基に、ユーザーが目的の案件を効率的に見つけられるよう、**検索機能の具体的な仕様（検索対象、クエリ、UIの振る舞い）**の設計を開始する。

提携パートナー管理機能の設計: 案件の登録・編集およびアクセス制御（RBAC）に関する具体的な機能仕様の設計を開始する。